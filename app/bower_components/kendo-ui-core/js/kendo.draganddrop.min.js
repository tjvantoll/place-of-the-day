/**
 * Copyright 2014 Telerik AD
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
!function(t,define){define(["./kendo.core.min","./kendo.userevents.min"],t)}(function(){return function(t,e){function n(e,n){try{return t.contains(e,n)||e==n}catch(i){return!1}}function i(t,e){return parseInt(t.css(e),10)||0}function o(t,e){return Math.min(Math.max(t,e.min),e.max)}function r(t,e){var n=x(t),o=n.left+i(t,"borderLeftWidth")+i(t,"paddingLeft"),r=n.top+i(t,"borderTopWidth")+i(t,"paddingTop"),a=o+t.width()-e.outerWidth(!0),s=r+t.height()-e.outerHeight(!0);return{x:{min:o,max:a},y:{min:r,max:s}}}function a(t,n,i){for(var o,r,a=0,s=n&&n.length,l=i&&i.length;t&&t.parentNode;){for(a=0;s>a;a++)if(o=n[a],o.element[0]===t)return{target:o,targetElement:t};for(a=0;l>a;a++)if(r=i[a],p.matchesSelector.call(t,r.options.filter))return{target:r,targetElement:t};t=t.parentNode}return e}var s,l,c,h,d,u,f=window.kendo,p=f.support,g=window.document,m=f.Class,v=f.ui.Widget,_=f.Observable,w=f.UserEvents,y=t.proxy,b=t.extend,x=f.getOffset,k={},C={},S={},T=f.elementUnderCursor,D="keyup",A="change",P="dragstart",M="hold",E="drag",I="dragend",B="dragcancel",L="hintDestroyed",z="dragenter",R="dragleave",F="drop",O=_.extend({init:function(e,n){var i=this,o=e[0];i.capture=!1,o.addEventListener?(t.each(f.eventMap.down.split(" "),function(){o.addEventListener(this,y(i._press,i),!0)}),t.each(f.eventMap.up.split(" "),function(){o.addEventListener(this,y(i._release,i),!0)})):(t.each(f.eventMap.down.split(" "),function(){o.attachEvent(this,y(i._press,i))}),t.each(f.eventMap.up.split(" "),function(){o.attachEvent(this,y(i._release,i))})),_.fn.init.call(i),i.bind(["press","release"],n||{})},captureNext:function(){this.capture=!0},cancelCapture:function(){this.capture=!1},_press:function(t){var e=this;e.trigger("press"),e.capture&&t.preventDefault()},_release:function(t){var e=this;e.trigger("release"),e.capture&&(t.preventDefault(),e.cancelCapture())}}),N=_.extend({init:function(e){var n=this;_.fn.init.call(n),n.forcedEnabled=!1,t.extend(n,e),n.scale=1,n.horizontal?(n.measure="offsetWidth",n.scrollSize="scrollWidth",n.axis="x"):(n.measure="offsetHeight",n.scrollSize="scrollHeight",n.axis="y")},makeVirtual:function(){t.extend(this,{virtual:!0,forcedEnabled:!0,_virtualMin:0,_virtualMax:0})},virtualSize:function(t,e){(this._virtualMin!==t||this._virtualMax!==e)&&(this._virtualMin=t,this._virtualMax=e,this.update())},outOfBounds:function(t){return t>this.max||this.min>t},forceEnabled:function(){this.forcedEnabled=!0},getSize:function(){return this.container[0][this.measure]},getTotal:function(){return this.element[0][this.scrollSize]},rescale:function(t){this.scale=t},update:function(t){var e=this,n=e.virtual?e._virtualMax:e.getTotal(),i=n*e.scale,o=e.getSize();0!==n&&(e.max=e.virtual?-e._virtualMin:0,e.size=o,e.total=i,e.min=Math.min(e.max,o-i),e.minScale=o/n,e.centerOffset=(i-o)/2,e.enabled=e.forcedEnabled||i>o,t||e.trigger(A,e))}}),H=_.extend({init:function(t){var e=this;_.fn.init.call(e),e.x=new N(b({horizontal:!0},t)),e.y=new N(b({horizontal:!1},t)),e.container=t.container,e.forcedMinScale=t.minScale,e.maxScale=t.maxScale||100,e.bind(A,t)},rescale:function(t){this.x.rescale(t),this.y.rescale(t),this.refresh()},centerCoordinates:function(){return{x:Math.min(0,-this.x.centerOffset),y:Math.min(0,-this.y.centerOffset)}},refresh:function(){var t=this;t.x.update(),t.y.update(),t.enabled=t.x.enabled||t.y.enabled,t.minScale=t.forcedMinScale||Math.min(t.x.minScale,t.y.minScale),t.fitScale=Math.max(t.x.minScale,t.y.minScale),t.trigger(A)}}),V=_.extend({init:function(t){var e=this;b(e,t),_.fn.init.call(e)},outOfBounds:function(){return this.dimension.outOfBounds(this.movable[this.axis])},dragMove:function(t){var e=this,n=e.dimension,i=e.axis,o=e.movable,r=o[i]+t;n.enabled&&((n.min>r&&0>t||r>n.max&&t>0)&&(t*=e.resistance),o.translateAxis(i,t),e.trigger(A,e))}}),U=m.extend({init:function(t){var e,n,i,o,r=this;b(r,{elastic:!0},t),i=r.elastic?.5:0,o=r.movable,r.x=e=new V({axis:"x",dimension:r.dimensions.x,resistance:i,movable:o}),r.y=n=new V({axis:"y",dimension:r.dimensions.y,resistance:i,movable:o}),r.userEvents.bind(["move","end","gesturestart","gesturechange"],{gesturestart:function(t){r.gesture=t,r.offset=r.dimensions.container.offset()},gesturechange:function(t){var i,a,s,l=r.gesture,c=l.center,h=t.center,d=t.distance/l.distance,u=r.dimensions.minScale,f=r.dimensions.maxScale;u>=o.scale&&1>d&&(d+=.8*(1-d)),o.scale*d>=f&&(d=f/o.scale),a=o.x+r.offset.left,s=o.y+r.offset.top,i={x:(a-c.x)*d+h.x-a,y:(s-c.y)*d+h.y-s},o.scaleWith(d),e.dragMove(i.x),n.dragMove(i.y),r.dimensions.rescale(o.scale),r.gesture=t,t.preventDefault()},move:function(t){t.event.target.tagName.match(/textarea|input/i)||(e.dimension.enabled||n.dimension.enabled?(e.dragMove(t.x.delta),n.dragMove(t.y.delta),t.preventDefault()):t.touch.skip())},end:function(t){t.preventDefault()}})}}),j=p.transitions.prefix+"Transform";l=p.hasHW3D?function(t,e,n){return"translate3d("+t+"px,"+e+"px,0) scale("+n+")"}:function(t,e,n){return"translate("+t+"px,"+e+"px) scale("+n+")"},c=_.extend({init:function(e){var n=this;_.fn.init.call(n),n.element=t(e),n.element[0].style.webkitTransformOrigin="left top",n.x=0,n.y=0,n.scale=1,n._saveCoordinates(l(n.x,n.y,n.scale))},translateAxis:function(t,e){this[t]+=e,this.refresh()},scaleTo:function(t){this.scale=t,this.refresh()},scaleWith:function(t){this.scale*=t,this.refresh()},translate:function(t){this.x+=t.x,this.y+=t.y,this.refresh()},moveAxis:function(t,e){this[t]=e,this.refresh()},moveTo:function(t){b(this,t),this.refresh()},refresh:function(){var t,e=this,n=e.x,i=e.y;e.round&&(n=Math.round(n),i=Math.round(i)),t=l(n,i,e.scale),t!=e.coordinates&&(f.support.browser.msie&&10>f.support.browser.version?(e.element[0].style.position="absolute",e.element[0].style.left=e.x+"px",e.element[0].style.top=e.y+"px"):e.element[0].style[j]=t,e._saveCoordinates(t),e.trigger(A))},_saveCoordinates:function(t){this.coordinates=t}}),h=v.extend({init:function(t,e){var n,i=this;v.fn.init.call(i,t,e),n=i.options.group,n in C?C[n].push(i):C[n]=[i]},events:[z,R,F],options:{name:"DropTarget",group:"default"},destroy:function(){var t,e=this.options.group,n=C[e]||S[e];if(n.length>1){for(v.fn.destroy.call(this),t=0;n.length>t;t++)if(n[t]==this){n.splice(t,1);break}}else h.destroyGroup(e)},_trigger:function(t,n){var i=this,o=k[i.options.group];return o?i.trigger(t,b({},n.event,{draggable:o,dropTarget:n.dropTarget})):e},_over:function(t){this._trigger(z,t)},_out:function(t){this._trigger(R,t)},_drop:function(t){var e=this,n=k[e.options.group];n&&(n.dropped=!e._trigger(F,t))}}),h.destroyGroup=function(t){var e,n=C[t]||S[t];if(n){for(e=0;n.length>e;e++)v.fn.destroy.call(n[e]);n.length=0,delete C[t],delete S[t]}},h._cache=C,d=h.extend({init:function(t,e){var n,i=this;v.fn.init.call(i,t,e),n=i.options.group,n in S?S[n].push(i):S[n]=[i]},options:{name:"DropTargetArea",group:"default",filter:null}}),u=v.extend({init:function(t,e){var n=this;v.fn.init.call(n,t,e),n._activated=!1,n.userEvents=new w(n.element,{global:!0,allowSelection:!0,filter:n.options.filter,threshold:n.options.distance,start:y(n._start,n),hold:y(n._hold,n),move:y(n._drag,n),end:y(n._end,n),cancel:y(n._cancel,n),select:y(n._select,n)}),n._afterEndHandler=y(n._afterEnd,n),n._captureEscape=y(n._captureEscape,n)},events:[M,P,E,I,B,L],options:{name:"Draggable",distance:f.support.touch?0:5,group:"default",cursorOffset:null,axis:null,container:null,filter:null,ignore:null,holdToDrag:!1,dropped:!1},cancelHold:function(){this._activated=!1},_captureEscape:function(t){var e=this;t.keyCode===f.keys.ESC&&(e._trigger(B,{event:t}),e.userEvents.cancel())},_updateHint:function(e){var n,i=this,r=i.options,a=i.boundaries,s=r.axis,l=i.options.cursorOffset;l?n={left:e.x.location+l.left,top:e.y.location+l.top}:(i.hintOffset.left+=e.x.delta,i.hintOffset.top+=e.y.delta,n=t.extend({},i.hintOffset)),a&&(n.top=o(n.top,a.y),n.left=o(n.left,a.x)),"x"===s?delete n.top:"y"===s&&delete n.left,i.hint.css(n)},_shouldIgnoreTarget:function(e){var n=this.options.ignore;return n&&t(e).is(n)},_select:function(t){this._shouldIgnoreTarget(t.event.target)||t.preventDefault()},_start:function(n){var i,o=this,a=o.options,s=a.container,l=a.hint;return this._shouldIgnoreTarget(n.touch.initialTouch)||a.holdToDrag&&!o._activated?(o.userEvents.cancel(),e):(o.currentTarget=n.target,o.currentTargetOffset=x(o.currentTarget),l&&(o.hint&&o.hint.stop(!0,!0).remove(),o.hint=f.isFunction(l)?t(l.call(o,o.currentTarget)):l,i=x(o.currentTarget),o.hintOffset=i,o.hint.css({position:"absolute",zIndex:2e4,left:i.left,top:i.top}).appendTo(g.body),o.angular("compile",function(){return o.hint.removeAttr("ng-repeat"),{elements:o.hint.get(),scopeFrom:n.target}})),k[a.group]=o,o.dropped=!1,s&&(o.boundaries=r(s,o.hint)),o._trigger(P,n)&&(o.userEvents.cancel(),o._afterEnd()),o.userEvents.capture(),t(g).on(D,o._captureEscape),e)},_hold:function(t){this.currentTarget=t.target,this._trigger(M,t)?this.userEvents.cancel():this._activated=!0},_drag:function(n){var i=this;n.preventDefault(),i._withDropTarget(n,function(i,o){if(!i)return s&&(s._trigger(R,b(n,{dropTarget:t(s.targetElement)})),s=null),e;if(s){if(o===s.targetElement)return;s._trigger(R,b(n,{dropTarget:t(s.targetElement)}))}i._trigger(z,b(n,{dropTarget:t(o)})),s=b(i,{targetElement:o})}),i._trigger(E,b(n,{dropTarget:s})),i.hint&&i._updateHint(n)},_end:function(e){var n=this;n._withDropTarget(e,function(n,i){n&&(n._drop(b({},e,{dropTarget:t(i)})),s=null)}),n._trigger(I,e),n._cancel(e.event)},_cancel:function(){var t=this;t._activated=!1,t.hint&&!t.dropped?setTimeout(function(){t.hint.stop(!0,!0).animate(t.currentTargetOffset,"fast",t._afterEndHandler)},0):t._afterEnd()},_trigger:function(t,e){var n=this;return n.trigger(t,b({},e.event,{x:e.x,y:e.y,currentTarget:n.currentTarget,dropTarget:e.dropTarget}))},_withDropTarget:function(t,e){var i,o,r=this,s=r.options,l=C[s.group],c=S[s.group];(l&&l.length||c&&c.length)&&(i=T(t),r.hint&&n(r.hint[0],i)&&(r.hint.hide(),i=T(t),i||(i=T(t)),r.hint.show()),o=a(i,l,c),o?e(o.target,o.targetElement):e())},destroy:function(){var t=this;v.fn.destroy.call(t),t._afterEnd(),t.userEvents.destroy(),t.currentTarget=null},_afterEnd:function(){var e=this;e.hint&&e.hint.remove(),delete k[e.options.group],e.trigger("destroy"),e.trigger(L),t(g).off(D,e._captureEscape)}}),f.ui.plugin(h),f.ui.plugin(d),f.ui.plugin(u),f.TapCapture=O,f.containerBoundaries=r,b(f.ui,{Pane:U,PaneDimensions:H,Movable:c})}(window.kendo.jQuery),window.kendo},"function"==typeof define&&define.amd?define:function(t,e){e()});